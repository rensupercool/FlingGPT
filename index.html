async function send() {
            const input = document.getElementById('userInput');
            const msg = input.value.trim();
            if (!msg) return;

            const chat = document.getElementById('chat');
            chat.innerHTML += `<div class="msg user"><b>You:</b> ${msg}</div>`;
            input.value = '';
            chat.scrollTop = chat.scrollHeight;

            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        message: `${FTAP_DATA}\n\nUser Question: ${msg}` 
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    // This will now show the EXACT error message from Google or Vercel
                    chat.innerHTML += `<div class="msg ai" style="color: #ff6b6b;"><b>Error:</b> ${data.error}</div>`;
                } else {
                    const aiText = data.candidates[0].content.parts[0].text;
                    chat.innerHTML += `<div class="msg ai"><b>FlingGPT:</b> ${aiText}</div>`;
                }
            } catch (e) {
                chat.innerHTML += `<div class="msg ai" style="color: #ff6b6b;"><b>Critical Error:</b> Site could not reach the API. Check Vercel logs.</div>`;
            }
            chat.scrollTop = chat.scrollHeight;
        }
